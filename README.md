[![Actions Status](https://github.com/aledoroshenko/SmallSerpentineIntelligence/workflows/CI/badge.svg)](https://github.com/aledoroshenko/SmallSerpentineIntelligence/actions)

# README

Сервер для учета игровой статистики: количество очков, игры, участники.

## Цели

- получить опыт работы с проектом от идеи до реализации (совместная работа с Гитом, Гитхабом, Пайчармом, управление пакетами, деплой, оформление кода, тестирование)
- получить опыт работы со стеком Питона (Фласк, Постгрес, Хероку) на бекенде и Svelte(?) на фронтенде
- получить опыт работы с базой данных и реальными запросами в понятном контексте (джоины, проектирование таблиц, оптимизация запросов)
- получить проект в портфолио как подтверждение навыков работы
- сделать платформу для проб новых подходов и решений

## Стек и архитектура

- IFTTT для интеграции с Телеграмом: один апплет для реакции на сообщение с ключевым словом `#stats` и реквеста на сервер, и второй - реакция на входящий реквест `stats_updated` (вебхук) и отсылка сообщения в Телеграм. (IFTTT аккаунт ale.doroshenko)
- Хероку для базы данных (Postgres, командный аккаунт Rokkoko)
- Интеграция с Гитхабом (код в Репле оттуда)

## Диаграмма

![](https://i.ibb.co/vsNbbzS/QOn-PGWWt-MUhh-U2p1c-C1pp5-D54t-Ay-Cl1-Kz-SJee-RMI.jpg)

## Возможные вспомогательные функции

- `post_response_to_telegram(message)` - получает уже подготовленную строку с общими статами, и засылает ее в бота
- `prepare_response_message(data)` - получает данные вида `{Егор:6, Сергей: 5}`, и готовит строку для Телеграма
- `get_stats(game_name)` - получает имя игры, для которой нужно взять данные, делает запрос в базу данных и возвращает данные вида `{Сергей:6, Егор: 3}`.
- `create_game_session(data)` - сохраняет сессию в базу данных.
- `save_scores(data)` - получает данные и сохраняет очки для участников сессии.
- `process_bot_message()` - функция-контроллер, берет входящие данные из реквеста, координирует работу вспомогательных функций и отправляет ответ.
